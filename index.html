<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Holiday Harmony</title>
  <style>
    :root{
      --bg1:#f6f7ff; --bg2:#ffffff; --card:#ffffffcc; --border:#e7e7ef;
      --text:#1c1c22; --muted:#6b6b78; --shadow:0 10px 30px rgba(0,0,0,.06);
      --radius:16px;
    }
    body{
      font-family:system-ui,Arial; max-width:860px; margin:28px auto; padding:0 14px;
      color:var(--text);
      background:
        linear-gradient(180deg, rgba(246,247,255,.88), rgba(255,255,255,.95)),
        url("assets/img/bg.jpg");
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }
    h1{margin:0 0 6px 0}
    .card{
      border:1px solid var(--border); border-radius:var(--radius); padding:14px; margin:12px 0;
      background:var(--card); box-shadow:var(--shadow); backdrop-filter: blur(6px);
      animation: fadeIn .35s ease;
    }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)} }
    input, select, button{
      width:100%; padding:12px; border-radius:14px; border:1px solid var(--border); margin:8px 0;
      font-size:15px; background:#fff;
    }
    button{font-weight:900; cursor:pointer; box-shadow: 0 6px 18px rgba(0,0,0,.06);}
    small{color:var(--muted)}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .row>*{flex:1; min-width: 180px;}
    .pill{display:inline-block; border:1px solid var(--border); background:#fff; border-radius:999px; padding:8px 12px;}
  </style>
</head>
<body>
  <h1>ðŸŽ„ Holiday Harmony</h1>
  <small class="pill">A cozy co-op: collect good moments, keep the vibe warm.</small>

  <div class="card">
    <h3>Create / Enter a room</h3>
    <div class="row">
      <input id="roomCode" placeholder="Room code (e.g. xmas2025)" />
      <input id="yourName" placeholder="Your name (saved on this device)" />
      <select id="yourRole">
        <option value="">Role (optional)</option>
        <option>Parent</option>
        <option>Child</option>
        <option>Relative</option>
        <option>Guest</option>
      </select>
    </div>
    <button id="goBtn" type="button">Go to room</button>
    <small>Tip: share the room link. Everyone uses the same room code.</small>
  </div>

  <div class="card">
    <h3>Join</h3>
    <input id="joinCode" placeholder="Enter room code (e.g. xmas2025)" />
    <button id="joinBtn" type="button">Join</button>
  </div>

  <script>
    const savedName = localStorage.getItem("hh_name") || "";
    const savedRole = localStorage.getItem("hh_role") || "";
    document.getElementById("yourName").value = savedName;
    document.getElementById("yourRole").value = savedRole;

    function goToRoom(code){
      code = (code || "").trim();
      const name = (document.getElementById("yourName").value || "").trim();
      const role = (document.getElementById("yourRole").value || "").trim();

      if(!code){ alert("Please enter a room code."); return; }

      if (name) localStorage.setItem("hh_name", name);
      if (role) localStorage.setItem("hh_role", role);

      let url = "room.html?room=" + encodeURIComponent(code);
      if (name) url += "&name=" + encodeURIComponent(name);
      if (role) url += "&role=" + encodeURIComponent(role);

      location.href = url;
    }

    document.getElementById("goBtn").addEventListener("click", () => {
      goToRoom(document.getElementById("roomCode").value);
    });

    document.getElementById("joinBtn").addEventListener("click", () => {
      goToRoom(document.getElementById("joinCode").value);
    });

    // Phone-friendly: allow Enter to join
    document.getElementById("roomCode").addEventListener("keydown", (e) => {
      if (e.key === "Enter") goToRoom(document.getElementById("roomCode").value);
    });
    document.getElementById("joinCode").addEventListener("keydown", (e) => {
      if (e.key === "Enter") goToRoom(document.getElementById("joinCode").value);
    });
  </script>
</body>
</html>
